

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="https://gitee.com/rogerskelamen/mdpic/raw/master/img/img.jpg">
  <link rel="icon" href="https://gitee.com/rogerskelamen/mdpic/raw/master/img/img.jpg">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  
    <meta name="description" content="">
  
  <meta name="author" content="Rogers Kelamen">
  <meta name="keywords" content="blog">
  
  <title>Screepæ•™ç¨‹| RO&#39;s Blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      
        
          
          
          
        
        <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.22.0/themes/prism-solarizedlight.min.css" />
      
      
        <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.22.0/plugins/line-numbers/prism-line-numbers.min.css" />
      
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"rokelamen.top","root":"/","version":"1.8.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":"Â§"},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":true,"baidu":"0d7560f90f7a21d6a9e7635611dac094","google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"2RbCqGEaklHVj7Gj6dtd2kM4-gzGzoHsz","app_key":"kdFD4FmNeIpaTMK269nEqhxx","server_url":"https://2rbcqgea.lc-cn-n1-shared.com"}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>RO's Blog</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                å‹é“¾
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('https://gitee.com/rogerskelamen/mdpic/raw/master/img/20201228140339.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Screepæ•™ç¨‹">
              
            </span>

            
              <div class="mt-3">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-author" aria-hidden="true"></i>
      Rogers Kelamen
    </span>
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2020-10-24 23:05" pubdate>
        2020å¹´10æœˆ24æ—¥ æ™šä¸Š
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      1.9k å­—
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      55
       åˆ†é’Ÿ
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Screepæ•™ç¨‹</h1>
            
              <p class="note note-info">
                
                  æœ¬æ–‡æœ€åæ›´æ–°äºï¼š2020å¹´10æœˆ26æ—¥ æ™šä¸Š
                
              </p>
            
            <div class="markdown-body">
              <h1 id="Screepsæ•™ç¨‹ï¼ˆå·²æ–­æ›´ï¼‰"><a href="#Screepsæ•™ç¨‹ï¼ˆå·²æ–­æ›´ï¼‰" class="headerlink" title="Screepsæ•™ç¨‹ï¼ˆå·²æ–­æ›´ï¼‰"></a>Screepsæ•™ç¨‹ï¼ˆå·²æ–­æ›´ï¼‰</h1><blockquote>
<p>Screeps æ˜¯ä¸€æ¬¾é¢å‘ç¼–ç¨‹çˆ±å¥½è€…çš„å¼€æº MMO RTS æ²™ç›’æ¸¸æˆï¼Œå…¶æ ¸å¿ƒæœºåˆ¶æ˜¯ä¸ºæ‚¨çš„å•ä½ç¼–å†™ AIã€‚æ‚¨å¯ä»¥é€šè¿‡ç¼–å†™ JavaScript æ¥æ§åˆ¶è‡ªå·±çš„æ®–æ°‘åœ°ã€‚æ‚¨çš„ä»£ç å°† 24/7 å…¨å¤©å€™ä¸é—´æ–­åœ°è¿è¡Œåœ¨ä¸€ä¸ªåºå¤§ä¸–ç•Œä¸­ã€‚ä¸ä»…å¦‚æ­¤ï¼Œè¿™ä¸ªä¸–ç•ŒåŒæ—¶ä¹Ÿå®¹çº³äº†è®¸è®¸å¤šå¤šå’Œæ‚¨ä¸€æ ·çš„ç©å®¶ã€‚<font color=#34b>â€”â€”æ¥è‡ªsteamé¡µé¢ä»‹ç»åŸæ–‡</font></p>
</blockquote>
<p>å—¯ï¼Œæ—¢ç„¶æ˜¯ç”¨JSæ¸¸ç©ï¼Œé‚£å°±å¤ªç¬¦åˆæˆ‘ç°é˜¶æ®µç ”ç©¶JSçš„éœ€æ±‚äº†ğŸ˜ã€‚ä½†æ˜¯è¿™ä¸ªæ¸¸æˆæœ‰ç‚¹éœ€è¦è®°å¿†çš„ä¸œè¥¿ï¼ˆå†µä¸”æ•™ç¨‹åˆæ˜¯è‹±æ–‡å¸¸è§„æ“ä½œï¼‰ï¼Œäºæ˜¯å°±å…ˆå†™ä¸‹äº†è¿™ç¯‡æ•™ç¨‹ï¼ˆå¯èƒ½è¿˜èƒ½å¸®åŠ©åˆ°å…¶ä»–äººå§ï¼‰â€”â€”è¯´å¹²å°±å¹²ã€‚</p>
<h1 id="GET-START"><a href="#GET-START" class="headerlink" title="GET START"></a>GET START</h1><h2 id="Concepts"><a href="#Concepts" class="headerlink" title="Concepts"></a>Concepts</h2><ul>
<li><font size=4>Room</font>

<p>è¿™æ˜¯ä½ çš„å¤§æœ¬è¥ï¼Œä½ çš„å‰æœŸå¼€è’æ“ä½œéƒ½åœ¨è¿™é‡Œ</p>
</li>
<li><font size=4>spawn</font>

<p>ä½ æœ€å¼€å§‹äº§ç”Ÿunitï¼ˆæˆ‘ä¸ªäººç†è§£ä¸ºæœ€åˆåŠ³åŠ¨åŠ›ï¼‰çš„åœ°æ–¹</p>
<p><strong>æ¯ä¸€æŠŠå¼€å±€æ—¶roomé‡Œå°±ä¼šæœ‰ä¸€ä¸ªspawnï¼Œä¸€èˆ¬é»˜è®¤åå­—æ˜¯Spawn1</strong></p>
</li>
<li><font size=4>creeps</font>

<p>é‚£äº›ä¸ªunitsåœ¨æ¸¸æˆä¸­è¢«ç§°ä½œä¸ºâ€creepsâ€</p>
</li>
</ul>
<h2 id="Create-your-first-creep"><a href="#Create-your-first-creep" class="headerlink" title="Create your first creep"></a>Create your first creep</h2><p><img src="https://gitee.com/rogerskelamen/mdpic/raw/master/img/image-20201024224511345.png" srcset="/img/loading.gif" alt=""></p>
<p>é€šè¿‡Gameè¿™ä¸ªå¯¹è±¡ï¼ˆå…¨å±€å¯¹è±¡ï¼Ÿï¼‰æˆ‘ä»¬å¯ä»¥å®šä½åˆ°ä¸€ä¸ªspawnï¼ˆ<strong>ä½¿ç”¨Gameä¸‹çš„<code>spawns[]</code>æ–¹æ³•ï¼Œä¼ å…¥ä¸€ä¸ªspawnçš„åå­—</strong>ï¼‰</p>
<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥ç”¨spawnä¸‹é¢çš„<code>spawnCreep()</code>æ–¹æ³•åˆ›å»ºä¸€ä¸ªcreepäº†ï¼ï¼ˆè¿™é‡Œé¢æœ‰ç‚¹å¯¹è±¡è¿­ä»£çš„æ€æƒ³ï¼‰</p>
<p><em><code>spawnCreep()</code>ä¸­æœ‰å‡ ä¸ªå‚æ•°ï¼Œä¸»è¦å®šä¹‰äº†è¿™ä¸ªcreepçš„åå­—å’Œå®ƒçš„ä¸€äº›å±æ€§</em></p>
<p>æ¯”å¦‚ä½ è¦æ˜¯æƒ³è¦ä¸€ä¸ªå«Harvester1çš„çŸ¿å·¥work creepï¼Œä½ å¯ä»¥ç”¨ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js">Game<span class="token punctuation">.</span>spawns<span class="token punctuation">[</span><span class="token string">'Spawn1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">spawnCreep</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token constant">WORK</span><span class="token punctuation">,</span> <span class="token constant">CARRY</span><span class="token punctuation">,</span> <span class="token constant">MOVE</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'Harvester1'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div>
<h2 id="View"><a href="#View" class="headerlink" title="View"></a>View</h2><p><img src="https://gitee.com/rogerskelamen/mdpic/raw/master/img/image-20201025114350517.png" srcset="/img/loading.gif" alt=""></p>
<p>åœ¨æ¸¸æˆçª—å£çš„æœ€é¡¶éƒ¨ï¼Œæœ‰å››ä¸ªå¯ç‚¹å‡»æŒ‰é’®ï¼Œ<strong>viewï¼ˆè§†çª—æ¨¡å¼ï¼‰æ˜¯åˆå§‹é»˜è®¤é€‰ä¸­çš„ï¼Œåœ¨æ­¤æ¨¡å¼ä¸‹ä½ å¯ä»¥æŸ¥çœ‹ä½ çš„spawnï¼Œcreepsç­‰çš„å±æ€§ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹åœ°å½¢ã€åæ ‡ç­‰ç®€å•ä¿¡æ¯ã€‚</strong></p>
<p><strong><font color=#34b>é€šè¿‡åœ¨viewä¸‹é€‰ä¸­ä¸€ä¸ªspawnæˆ–creepå°±å¯ä»¥æŸ¥çœ‹è¿™ä¸ªå…ƒç´ çš„åŸºæœ¬ä¿¡æ¯ã€‚</font></strong>ï¼ˆä¿¡æ¯ä¼šå‡ºç°åœ¨å³è¾¹æ ï¼‰</p>
<p><img src="https://gitee.com/rogerskelamen/mdpic/raw/master/img/image-20201025115525143.png" srcset="/img/loading.gif" alt=""></p>
<h1 id="Get-Resource"><a href="#Get-Resource" class="headerlink" title="Get Resource"></a>Get Resource</h1><blockquote>
<p>å½“ä½ åˆ¶é€ å‡ºäº†ç¬¬ä¸€ä¸ªworker creepçš„æ—¶å€™ï¼Œæ­å–œä½ ï¼Œä½ å¯ä»¥å¼€å§‹æŒ–çŸ¿äº†ï¼</p>
</blockquote>
<h2 id="Do-it-in-script"><a href="#Do-it-in-script" class="headerlink" title="Do it in script"></a>Do it in script</h2><p>å¦‚æœä½ æƒ³è¦ä½ çš„creepä¸€ç›´ä¸åœæ­‡çš„æŒ–çŸ¿ï¼Œä½ è¦æ˜¯è¿˜æ˜¯ç”¨consoleæ˜¾ç„¶æ˜¯ä¸å¤Ÿäº†çš„ï¼Œè¿™æ—¶å€™å°±å¾—ç”¨ä¸ŠScriptåŒºåŸŸã€‚</p>
<p><strong>ScriptåŒºåŸŸé‡Œæ˜¯ä½ å†™å¥½çš„scriptä»£ç ï¼Œå½“ä½ è¿è¡Œä»£ç æ—¶ï¼Œå®ƒå°±ä¼šä¸€ç›´è¿è¡Œä¸‹å»ã€‚</strong></p>
<blockquote>
<p>æ­£å¼å¼€å§‹äº†ç¼–ç¨‹çš„æ—…ç¨‹</p>
</blockquote>
<h2 id="Go-to-workï¼"><a href="#Go-to-workï¼" class="headerlink" title="Go to workï¼"></a>Go to workï¼</h2><p><img src="https://gitee.com/rogerskelamen/mdpic/raw/master/img/QQæˆªå›¾20201025121306.png" srcset="/img/loading.gif" alt=""></p>
<p>ä½¿ç”¨Gameå¯¹è±¡ä¸‹çš„<code>creeps[]</code>æ¥å®šä½åˆ°ä¸€ä¸ªcreepï¼ˆé€šè¿‡åå­—å®šä½ï¼‰</p>
<p>æ¥ç€ä½¿ç”¨Roomå¯¹è±¡ä¸‹çš„<code>find()</code>æ–¹æ³•æ¥æ‰¾åˆ°ä¸€ä¸ªèµ„æºç‚¹</p>
<h3 id="FIND-SOURCES"><a href="#FIND-SOURCES" class="headerlink" title="FIND_SOURCES"></a><code>FIND_SOURCES</code></h3><p>è¿™æ˜¯ä¸€ä¸ªæŸ¥æ‰¾èµ„æºçš„ä¸€ä¸ªå†…ç½®å¸¸é‡ï¼Œå’Œä¹‹åçš„<code>ERR_NOT_IN_RANGE</code>ä¸€æ ·ã€‚</p>
<p><strong>è¦æ˜¯å°†è¿™ä¸ªå¸¸é‡å†™åˆ°<code>find()</code>æ–¹æ³•ä¸­ï¼Œåˆ™ä¼šé€‰å®šåˆ°æ‰€æœ‰roomä¸­çš„èµ„æº<font color=#34b>ï¼ˆè¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç´¢å¼•å€¼è¶Šå¤§èµ„æºè¶Šè¿œï¼‰</font></strong></p>
<p>ç„¶ååœ¨module.exports.loopè¿™ä¸ªå…¨å±€æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬çš„creepä¼šæŒ‰ç…§ä»£ç ä¸€ç›´loopæ‰§è¡Œã€‚</p>
<div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js">module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function-variable function">loop</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> creep <span class="token operator">=</span> Game<span class="token punctuation">.</span>creeps<span class="token punctuation">[</span><span class="token string">'Harvester1'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> sources <span class="token operator">=</span> creep<span class="token punctuation">.</span>room<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token constant">FIND_SOURCES</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>creep<span class="token punctuation">.</span><span class="token function">harvest</span><span class="token punctuation">(</span>sources<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">ERR_NOT_IN_RANGE</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        creep<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>sources<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
<h2 id="Carry-and-come-back"><a href="#Carry-and-come-back" class="headerlink" title="Carry and come back"></a>Carry and come back</h2><p><img src="https://gitee.com/rogerskelamen/mdpic/raw/master/img/QQæˆªå›¾20201025132346.png" srcset="/img/loading.gif" alt=""></p>
<p>æƒ³è¦æ»¡è½½çš„creepè¿”å›åˆ°spawné‡Œå»ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨Creepä¸‹çš„<code>transfer()</code>æ–¹æ³•</p>
<p>ç„¶åé€šè¿‡Creepä¸‹çš„<code>.store.getFreeCapacity()</code>æˆ‘ä»¬å¯ä»¥åˆ¤æ–­å®ƒåˆ°åº•è¿˜èƒ½ä¸èƒ½è£…ä¸‹å»ï¼Œå³ç”¨<code>.store.getFreeCapacity() &gt; 0</code>ã€‚</p>
<p>æœ€åæˆ‘ä»¬çš„ä»£ç ä¼šå˜æˆè¿™æ ·ï¼š</p>
<div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js">module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function-variable function">loop</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> creep <span class="token operator">=</span> Game<span class="token punctuation">.</span>creeps<span class="token punctuation">[</span><span class="token string">'Harvester1'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span>creep<span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">getFreeCapacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">var</span> sources <span class="token operator">=</span> creep<span class="token punctuation">.</span>room<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token constant">FIND_SOURCES</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>creep<span class="token punctuation">.</span><span class="token function">harvest</span><span class="token punctuation">(</span>sources<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">ERR_NOT_IN_RANGE</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            creep<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>sources<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> creep<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>Game<span class="token punctuation">.</span>spawns<span class="token punctuation">[</span><span class="token string">'Spawn1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">RESOURCE_ENERGY</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">ERR_NOT_IN_RANGE</span> <span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            creep<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>Game<span class="token punctuation">.</span>spawns<span class="token punctuation">[</span><span class="token string">'Spawn1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
<p><em>ç¨å¾®æä¸€å˜´ï¼Œ<code>moveTo()</code>æ–¹æ³•å¯ä»¥è®©creepç§»åŠ¨åˆ°å‚æ•°ä¸­æŒ‡å®šçš„åœ°ç‚¹ã€‚</em></p>
<blockquote>
<p>åœ¨å»æ¯ä¸€ä¸ªåœ°ç‚¹æ—¶ï¼Œæˆ‘ä»¬éƒ½ç”¨åˆ°äº†å¸¸é‡<code>ERR_NOT_IN_RANGE</code>ï¼Œè¿™æ˜¯ä¸ºäº†åˆ¤æ–­è¿™ä¸ªèµ„æºæˆ–åœ°ç‚¹æ˜¯å¦å°±åœ¨è·Ÿå‰ã€‚ï¼ˆ<u>å»ºè®®æ¯æ¬¡æœ‰ç§»åŠ¨æ—¶åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦åœ¨é™„è¿‘ï¼Œä¸ç„¶å°±ç§»åŠ¨ä¸äº†äº†</u>ï¼‰</p>
</blockquote>
<h1 id="awsl"><a href="#awsl" class="headerlink" title="awsl"></a>awsl</h1><blockquote>
<p>ä¸è¦ä»¥ä¸ºä½ çš„creepå°±ä¼šä¸€ç›´è¿™ä¹ˆå–åŠ›çš„å·¥ä½œä¸‹å»ï¼Œå®ƒä¹Ÿä¼šç´¯æ­»çš„ï¼(ToT)/~~~</p>
</blockquote>
<p><strong>æ¯ä¸ªcreepéƒ½æœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼š1500 game ticks</strong></p>
<h1 id="I-need-More"><a href="#I-need-More" class="headerlink" title="I need More!"></a>I need More!</h1><blockquote>
<p>æ—¢ç„¶çŸ¥é“ä½ çš„creepä¼šdieï¼Œé‚£ä¹ˆæˆ‘ä»¬åªèƒ½ä¸åœåœ°åˆ¶é€ æ–°çš„creepäº†</p>
</blockquote>
<p>è¿˜æ˜¯ç†Ÿæ‚‰çš„é…æ–¹ï¼š</p>
<div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js">Game<span class="token punctuation">.</span>spawns<span class="token punctuation">[</span><span class="token string">'Spawn1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">spawnCreep</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token constant">WORK</span><span class="token punctuation">,</span> <span class="token constant">CARRY</span><span class="token punctuation">,</span> <span class="token constant">MOVE</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'Harvester2'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div>
<p>warningï¼š<font color=brown>ä½ å¾—é¦–å…ˆæ”’è¶³200èƒ½é‡ç‚¹ï¼Œä¸ç„¶åªä¼šè¿”å›ERR_NOT_ENOUGH_ENERGYï¼ˆ-6ï¼‰</font></p>
<p><em>å½“æˆ‘ä»¬çš„ç¬¬äºŒä¸ªcreepè¢«åˆ›é€ å‡ºæ¥ä¹‹åï¼Œæˆ‘ä»¬çš„ä»£ç ä¹Ÿè¦æ”¹æ”¹äº†</em></p>
<div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js">module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function-variable function">loop</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> name <span class="token keyword">in</span> Game<span class="token punctuation">.</span>creeps<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">var</span> creep <span class="token operator">=</span> Game<span class="token punctuation">.</span>creeps<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>creep<span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">getFreeCapacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">var</span> sources <span class="token operator">=</span> creep<span class="token punctuation">.</span>room<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token constant">FIND_SOURCES</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>creep<span class="token punctuation">.</span><span class="token function">harvest</span><span class="token punctuation">(</span>sources<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">ERR_NOT_IN_RANGE</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                creep<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>sources<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>creep<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>Game<span class="token punctuation">.</span>spawns<span class="token punctuation">[</span><span class="token string">'Spawn1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">RESOURCE_ENERGY</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">ERR_NOT_IN_RANGE</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                creep<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>Game<span class="token punctuation">.</span>spawns<span class="token punctuation">[</span><span class="token string">'Spawn1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
<blockquote>
<p>ç”¨for inå¾ªç¯å®ç°äº†æ‰€æœ‰çš„creepséƒ½å»æ¬çŸ¿äº†</p>
</blockquote>
<h1 id="Improve-the-code"><a href="#Improve-the-code" class="headerlink" title="Improve the code"></a>Improve the code</h1><h2 id="Create-module"><a href="#Create-module" class="headerlink" title="Create module"></a>Create module</h2><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªmoduleæ¥åˆ†å¼€ç®¡ç†æˆ‘ä»¬çš„ä»£ç ï¼Œå–åä¸º<code>roleHarvester</code>ï¼ˆåˆ™å®ƒåœ¨scriptä¸­çš„æ¨¡å—åä¸ºrole.harvesterï¼‰</p>
<p>é‡Œé¢æœ‰ä¸€ä¸ªå±æ€§åä¸º<code>run</code>ï¼Œè¿™ä¸ªå±æ€§ï¼ˆå…¶å®æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼‰å¯ä»¥æ”¾å…¥å…¥æˆ‘ä»¬ä¹‹å‰å†™å¥½çš„ä»£ç å—ï¼Œä¹‹ååœ¨æ¨¡å—å¯¼å…¥æ—¶æˆ‘ä»¬å°±ç”¨è¿™ä¸ª<code>run</code>æ–¹æ³•ä¸­çš„ä»£ç æ¥æ‰§è¡Œã€‚</p>
<div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">var</span> roleHarvester <span class="token operator">=</span> <span class="token punctuation">&#123;</span>

    <span class="token comment">/** @param &#123;Creep&#125; creep **/</span>
    <span class="token function-variable function">run</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">creep</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	    <span class="token keyword">if</span><span class="token punctuation">(</span>creep<span class="token punctuation">.</span>store<span class="token punctuation">.</span><span class="token function">getFreeCapacity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">var</span> sources <span class="token operator">=</span> creep<span class="token punctuation">.</span>room<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token constant">FIND_SOURCES</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>creep<span class="token punctuation">.</span><span class="token function">harvest</span><span class="token punctuation">(</span>sources<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">ERR_NOT_IN_RANGE</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                creep<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>sources<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>creep<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>Game<span class="token punctuation">.</span>spawns<span class="token punctuation">[</span><span class="token string">'Spawn1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token constant">RESOURCE_ENERGY</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">ERR_NOT_IN_RANGE</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                creep<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>Game<span class="token punctuation">.</span>spawns<span class="token punctuation">[</span><span class="token string">'Spawn1'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> roleHarvester<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
<p><em>è®°ä½ï¼Œè¦åˆ›å»ºæ¨¡å—å°±è¦åœ¨mainæ–¹æ³•ä¸‹é¢è¾“å…¥moduleçš„åå­—ï¼Œç„¶ååœ¨è¿™ä¸ªæ¨¡å—é‡Œé¢å†™ä¸Šå¦‚ä¸Šçš„ä»£ç </em></p>
<h2 id="Use-the-Module"><a href="#Use-the-Module" class="headerlink" title="Use the Module"></a>Use the Module</h2><p><strong>åœ¨ä¸»æ¨¡å—ï¼ˆmain moduleï¼‰ä¹‹å¤–ï¼Œæˆ‘ä»¬å¾—å»ºç«‹ä¸€ä¸ªç”¨æ¥å¼•å…¥æ¨¡å—çš„å˜é‡ï¼Œç”¨<code>require()</code>å…¨å±€æ–¹æ³•å¯ä»¥æŒ‡æ˜æ˜¯å“ªä¸ªæ¨¡å—ã€‚</strong></p>
<p>ä¹‹åæˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸»æ¨¡å—ä¸­ç”¨è¿™ä¸ªæ¨¡å—å˜é‡æ¥çœå»å¾ˆå¤šå·¥ä½œé‡äº†ï¼š</p>
<div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">var</span> roleHarvester <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'role.harvester'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function-variable function">loop</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> name <span class="token keyword">in</span> Game<span class="token punctuation">.</span>creeps<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">var</span> creep <span class="token operator">=</span> Game<span class="token punctuation">.</span>creeps<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
        roleHarvester<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>creep<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
<h1 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h1><blockquote>
<p>é€šè¿‡controllerï¼Œæˆ‘ä»¬å¯ä»¥å»ºé€ æ›´å¤šçš„å»ºç­‘æˆ–å·¥å…·ï¼Œä½†æ˜¯å‰ææ˜¯ä½ controllerçš„levelè¶³å¤Ÿé«˜ã€‚ã€‚</p>
</blockquote>
<h2 id="upgrade-it"><a href="#upgrade-it" class="headerlink" title="upgrade it"></a>upgrade it</h2><p><img src="https://gitee.com/rogerskelamen/mdpic/raw/master/img/image-20201025202115487.png" srcset="/img/loading.gif" alt=""></p>
<p>é¦–å…ˆå’±ä»¬è¿˜æ˜¯å¾—åˆ›å»ºä¸€ä¸ªç”¨æ¥å‡çº§controllerçš„creepï¼Œå°±å…ˆå«åšUpgrader1</p>
<div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js">Game<span class="token punctuation">.</span>spawns<span class="token punctuation">[</span><span class="token string">'Spawn1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">spawnCreep</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token constant">WORK</span><span class="token punctuation">,</span> <span class="token constant">CARRY</span><span class="token punctuation">,</span> <span class="token constant">MOVE</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'Upgrader1'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></div>
<blockquote>
<p>ä½†æ˜¯è¿™ä¸ªUpgrader1è¢«äº§å‡ºä¹‹åï¼Œä»–è¿˜æ˜¯åšç€å’Œharvesterä¸€æ ·çš„äº‹ã€‚</p>
</blockquote>
<font size=4>new concept: Memory</font>

<p>é€šè¿‡Memoryï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰æ¯ä¸ªcreepçš„è§’è‰²ï¼ˆroleï¼‰ï¼Œç„¶åä½¿å…¶åšä¸åŒçš„å·¥ä½œã€‚</p>
<div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js">Game<span class="token punctuation">.</span>creeps<span class="token punctuation">[</span><span class="token string">'Harvester1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>memory<span class="token punctuation">.</span>role <span class="token operator">=</span> <span class="token string">'harvester'</span><span class="token punctuation">;</span>
Game<span class="token punctuation">.</span>creeps<span class="token punctuation">[</span><span class="token string">'Upgrader1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>memory<span class="token punctuation">.</span>role <span class="token operator">=</span> <span class="token string">'upgrader'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div>
<p><strong>ä½ å¯ä»¥åœ¨æ¯ä¸€ä¸ªcreepçš„çŠ¶æ€é¡µæŸ¥çœ‹memoryï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨ä¸‹æ–¹çš„Memoryæ ä¸­æŸ¥çœ‹</strong></p>
<p>ç°åœ¨æˆ‘ä»¬å†å®šä¹‰ä¸€ä¸ªmoduleæ¥ä½¿Upgrader1çœŸæ­£å·¥ä½œèµ·æ¥ï¼Œå‘æŒ¥å®ƒæœ¬åº”çš„ä½œç”¨ã€‚</p>
<div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">var</span> roleUpgrader <span class="token operator">=</span> <span class="token punctuation">&#123;</span>

    <span class="token comment">/** @param &#123;Creep&#125; creep **/</span>
    <span class="token function-variable function">run</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">creep</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
	    <span class="token keyword">if</span><span class="token punctuation">(</span>creep<span class="token punctuation">.</span>store<span class="token punctuation">[</span><span class="token constant">RESOURCE_ENERGY</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">var</span> sources <span class="token operator">=</span> creep<span class="token punctuation">.</span>room<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token constant">FIND_SOURCES</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>creep<span class="token punctuation">.</span><span class="token function">harvest</span><span class="token punctuation">(</span>sources<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">ERR_NOT_IN_RANGE</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                creep<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>sources<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>creep<span class="token punctuation">.</span><span class="token function">upgradeController</span><span class="token punctuation">(</span>creep<span class="token punctuation">.</span>room<span class="token punctuation">.</span>controller<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token constant">ERR_NOT_IN_RANGE</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                creep<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>creep<span class="token punctuation">.</span>room<span class="token punctuation">.</span>controller<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> roleUpgrader<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
<p><strong>è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°äº†creepçš„<code>upgradeController</code>æ–¹æ³•ï¼Œç”¨è¿™ä¸ªæ–¹æ³•å»å‡çº§controller</strong></p>
<p>æ¥ç€å’±ä»¬æŠŠæ¨¡å—å¯¼å…¥åˆ°mainæ¨¡å—ä¸­å»ï¼š</p>
<div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">var</span> roleHarvester <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'role.harvester'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> roleUpgrader <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'role.upgrader'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span><span class="token function-variable function">loop</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> name <span class="token keyword">in</span> Game<span class="token punctuation">.</span>creeps<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">var</span> creep <span class="token operator">=</span> Game<span class="token punctuation">.</span>creeps<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>creep<span class="token punctuation">.</span>memory<span class="token punctuation">.</span>role <span class="token operator">==</span> <span class="token string">'harvester'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            roleHarvester<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>creep<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>creep<span class="token punctuation">.</span>memory<span class="token punctuation">.</span>role <span class="token operator">==</span> <span class="token string">'upgrader'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            roleUpgrader<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>creep<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></div>
<p><strong><font color=brown>æ¯è¿‡20000 ticksï¼Œcontrollerä¼šè‡ªåŠ¨æ‰ä¸€çº§ï¼Œæ‰å®Œåˆ°0çº§ä½ çš„roomå°±æ²¡äº†</font>ï¼Œæ‰€ä»¥è‡³å°‘ç¡®ä¿æœ‰ä¸€ä¸ªcreepè¿›è¡Œå‡çº§å·¥ä½œã€‚</strong></p>
<h1 id="Build-Structure"><a href="#Build-Structure" class="headerlink" title="Build Structure"></a>Build Structure</h1><font size=4>new concept: Extension</font>

<p>Extensionæ˜¯å»ºé€ æ›´å¤§çš„creepçš„å¿…éœ€å“ï¼Œä½†æ˜¯ä½ å¾—å…ˆæ‰©å±•spawnï¼Œ<u>ä¸ç„¶300èƒ½é‡ç‚¹çš„å‚¨é‡æ€ä¹ˆå¤Ÿå‘¢</u></p>
<h2 id="create-Extension"><a href="#create-Extension" class="headerlink" title="create Extension"></a>create Extension</h2><p><img src="https://gitee.com/rogerskelamen/mdpic/raw/master/img/image-20201026213743220.png" srcset="/img/loading.gif" alt=""></p>
<p>é¦–å…ˆï¼Œä½ å¿…é¡»è¦åˆ›å»ºä¸€ä¸ªcreepç”¨æ¥ä¸“é—¨æå‡ºextensionï¼Œæˆ‘ä»¬æš‚æ—¶å°±æŠŠè¿™ç§creepå«åšbuilderäº†ï¼Œ<strong>ç„¶åç›´æ¥åœ¨äº§ç”Ÿcreepçš„å‘½ä»¤ä¸­å†™ä¸Šå®ƒçš„memoryï¼ˆå…¶å®ä¹‹å‰çš„creepéƒ½å¯ä»¥è¿™ä¹ˆåšï¼‰</strong></p>
<div class="code-wrapper"><pre class="line-numbers language-js" data-language="js"><code class="language-js">Game<span class="token punctuation">.</span>spawns<span class="token punctuation">[</span><span class="token string">'Spawn1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">spawnCreep</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token constant">WORK</span><span class="token punctuation">,</span> <span class="token constant">CARRY</span><span class="token punctuation">,</span> <span class="token constant">MOVE</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'Builder1'</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span> memory<span class="token operator">:</span> <span class="token punctuation">&#123;</span> role<span class="token operator">:</span> <span class="token string">'builder'</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></div>
<h2 id="Create-Builder-Role"><a href="#Create-Builder-Role" class="headerlink" title="Create Builder Role"></a>Create Builder Role</h2><p><img src="https://gitee.com/rogerskelamen/mdpic/raw/master/img/image-20201026222017249.png" srcset="/img/loading.gif" alt=""></p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/games/">games</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/js/">js</a>
                    
                      <a class="hover-with-bg" href="/tags/steam/">steam</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2020/11/08/docsify%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">docsifyç½‘ç«™æ­å»º</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/10/23/canvas%E7%BB%86%E8%8A%82%E8%AE%B2%E8%A7%A3/">
                        <span class="hidden-mobile">canvasç»†èŠ‚è®²è§£</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments">
                
                  
                
                
  <div id="vcomments"></div>
  <script type="text/javascript">
    Fluid.utils.waitElementVisible('vcomments', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', function () {
        new Valine({
          el: "#vcomments",
          app_id: "2RbCqGEaklHVj7Gj6dtd2kM4-gzGzoHsz",
          app_key: "kdFD4FmNeIpaTMK269nEqhxx",
          placeholder: "say something...",
          path: window.location.pathname,
          avatar: "mp",
          meta: ["nick","mail","link"],
          pageSize: "10",
          lang: "zh-CN",
          highlight: true,
          recordIP: true,
          serverURLs: "https://2rbcqgea.lc-cn-n1-shared.com",
        });
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the
    <a target="_blank" href="https://valine.js.org" rel="nofollow noopener noopener">comments powered by Valine.</a>
  </noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- LeanCloud ç»Ÿè®¡PV -->
        <span id="leancloud-site-pv-container" style="display: none">
            æ€»è®¿é—®é‡ 
            <span id="leancloud-site-pv"></span>
             æ¬¡
          </span>
      
      
        <!-- LeanCloud ç»Ÿè®¡UV -->
        <span id="leancloud-site-uv-container" style="display: none">
            æ€»è®¿å®¢æ•° 
            <span id="leancloud-site-uv"></span>
             äºº
          </span>
      

    
  </div>


  

  

  <!-- è‡ªå·±è®¾ç½®ä¸€ä¸ªè®°å½•ç½‘ç«™è¿è¡Œæ—¶é—´çš„æ–¹æ³• -->
  <span id="sitetime" style="font-size: 14px; font-family: Consolas;font-weight: normal; color: #aaa;"></span>
  <script language=javascript>
    function siteTime(){
      window.setTimeout("siteTime()", 1000);
      var seconds = 1000;
      var minutes = seconds * 60;
      var hours = minutes * 60;
      var days = hours * 24;
      var years = days * 365;
      var today = new Date();
      var todayYear = today.getFullYear();
      var todayMonth = today.getMonth()+1;
      var todayDate = today.getDate();
      var todayHour = today.getHours();
      var todayMinute = today.getMinutes();
      var todaySecond = today.getSeconds();
      /* Date.UTC() -- è¿”å›dateå¯¹è±¡è·ä¸–ç•Œæ ‡å‡†æ—¶é—´(UTC)1970å¹´1æœˆ1æ—¥åˆå¤œä¹‹é—´çš„æ¯«ç§’æ•°(æ—¶é—´æˆ³)
      year - ä½œä¸ºdateå¯¹è±¡çš„å¹´ä»½ï¼Œä¸º4ä½å¹´ä»½å€¼
      month - 0-11ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„æœˆä»½
      day - 1-31ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„å¤©æ•°
      hours - 0(åˆå¤œ24ç‚¹)-23ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„å°æ—¶æ•°
      minutes - 0-59ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„åˆ†é’Ÿæ•°
      seconds - 0-59ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„ç§’æ•°
      microseconds - 0-999ä¹‹é—´çš„æ•´æ•°ï¼Œåšä¸ºdateå¯¹è±¡çš„æ¯«ç§’æ•° */
      var t1 = Date.UTC(2020,10,18,15,00,00); //åŒ—äº¬æ—¶é—´2020-10-18 00:00:00
      var t2 = Date.UTC(todayYear,todayMonth,todayDate,todayHour,todayMinute,todaySecond);
      var diff = t2-t1;
      var diffYears = Math.floor(diff/years);
      var diffDays = Math.floor((diff/days)-diffYears*365);
      var diffHours = Math.floor((diff-(diffYears*365+diffDays)*days)/hours);
      var diffMinutes = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours)/minutes);
      var diffSeconds = Math.floor((diff-(diffYears*365+diffDays)*days-diffHours*hours-diffMinutes*minutes)/seconds);
      document.getElementById("sitetime").innerHTML=" å°ç ´ç«™å·²å‹‰å¼ºè¿è¡Œäº† "+/*diffYears+" å¹´ "+*/diffDays+" å¤© "+diffHours+" å°æ—¶ "+diffMinutes+" åˆ†é’Ÿ "+diffSeconds+" ç§’";
    }/*å› ä¸ºå»ºç«™æ—¶é—´è¿˜æ²¡æœ‰ä¸€å¹´ï¼Œå°±å°†ä¹‹æ³¨é‡Šæ‰äº†ã€‚éœ€è¦çš„å¯ä»¥å–æ¶ˆ*/
    siteTime();
  </script>
  <!-- è‡ªå·±è®¾ç½®ä¸€ä¸ªè®°å½•ç½‘ç«™è¿è¡Œæ—¶é—´çš„æ–¹æ³• -->
  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  
    
  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>




  <script defer src="/js/leancloud.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      $('#local-search-input').on('click', function() {
        searchFunc(path, 'local-search-input', 'local-search-result');
      });
      $('#modalSearch').on('shown.bs.modal', function() {
        $('#local-search-input').focus();
      });
    })()
  </script>









  <script  src="https://cdn.jsdelivr.net/npm/mermaid@8.8.3/dist/mermaid.min.js" ></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize({"theme":"default"});
    }
  </script>




  
    <!-- Baidu Analytics -->
    <script defer>
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?0d7560f90f7a21d6a9e7635611dac094";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  

  

  

  

  





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ ä¿æŒåœ¨æœ€åº•éƒ¨ -->
<script  src="/js/boot.js" ></script>



</body>
</html>
